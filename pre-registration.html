<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>IOSCO</title>

	<!-- <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet"> -->


	<link rel="stylesheet" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="./css/custom.css">

</head>
<body>
	<header>
		<nav class="navbar navbar-expand-lg navbar-light">
			<div class="container">

				<button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="navbar-brand-wrap order-0 d-none d-lg-block">
					<a class="navbar-brand  p-0 m-0" href="/">
						<img src="./images/iosco_logo_red.svg" alt="logo">
					</a>
				</div>

				<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="/">Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link " href="./schedule.html">Program</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="./hotels.html">Hotels</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="./flights.html">Flights</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								Organizers
							</a>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" href="./organization-qfma.html">QFMA</a>
								</li>
								<li>
									<a class="dropdown-item" href="./organization-iosco.html">IOSCO</a>
								</li>
							</ul>
						</li>
						<li class="nav-item">
							<a class="nav-link " href="./contact.html">Contact</a>
						</li>
						<li class="nav-item">
							<a class="nav-link active" href="./pre-registration.html">Pre-Registration</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	<main>
		<section class="preRegisterFromWrap my-5 pb-5">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-lg-6 col-12">
						<div class="formWrap">
							<div class="headlineWrap">
								<h1 class="headline">Pre-Registration</h1>
								<p>Please use the email address associated with your IOSCO member organization to complete your pre-registration. This ensures a smooth verification process and timely updates. Thank you!</p>
							</div>
							<form id="preRegForm1">
								<div class="form-group mb-4">
									<label for="firstName">First Name</label>
									<input type="text" class="form-control" id="firstName" placeholder="First Name" required>
								</div>
								<div class="form-group mb-4">
									<label for="lastName">Last Name</label>
									<input type="text" class="form-control" id="lastName" placeholder="Last Name" required>
								</div>
								<div class="form-group mb-4">
									<label for="email">Official email</label>
									<input type="email" class="form-control" id="email" placeholder="Email" required>
								</div>
								<div class="form-group mt-5">
									<input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">
									<button type="submit" class="btn btn-submit">Submit</button>

									<div class="disclmr mt-3">
										Early Registration Available
										<br>
										<!-- <a href="#">Terms and Conditions</a> -->
									</div>
								</div>
							</form>

							<div class="confrmMsgWrap">
								<div class="confrmMsg success">
									<div class="headline">Thank You!</div>
									<p>Your pre-registration has been submitted successfully. We appreciate your interest.</p>
									<p>You should receive a confirmation email with further instructions soon. If you have any questions, feel free to contact our support team.</p>
									<p>We're excited to have you with us.</p>
								</div>
								<div class="confrmMsg error">
									<div class="headline">Error!</div>
									<p>We encountered an issue while processing your request. This may be due to a technical problem or because your email address is not associated with IOSCO.</p>
									<p>Please verify your email address and try again. If the issue persists, contact our support team for assistance.</p>
									<p>We apologize for the inconvenience and thank you for your understanding.</p>
								</div>
							</div>
						</div>
					</div>

					<div class="col-lg-6 col-12">
					</div>
				</div>
			</div>
		</section>
	</main>
	<footer>
		<div class="container short">
			<div class="row">
				<div class="col-md-5 col-12">
					<div class="footerInfo">
						<h3 class="headline">
							About IOSCO
						</h3>
						<p>IOSCO is the international body that brings  together the world's securities regulators and is recognized as the  global standard setter for financial markets regulation. We develop,  implement and promote adherence to internationally recognized standards  for financial markets regulation and work closely with other  international organizations on the global regulatory reform agenda.</p>
					</div>
				</div>
				<div class="col-md-3 col-12"></div>
				<div class="col-md-4 col-12">
					<div class="footerLogo">
						<h3 class="headline">
							Organizers
						</h3>

						<div class="imgWrap">
							<!-- <img src="./images/iosco_logo_white.svg" alt=""> -->
							<img src="./images/icon_logo_words_iosco_white.svg" alt="">
							<img src="./images/qfma_logo_footer.png" alt="">
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12">
					<div class="copyrightTxtWrap">
						<p>Copyrights Information</p>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<script src="./js/jquery-3.7.1.min.js" defer></script>
	<script src="./js/bootstrap.bundle.min.js" defer></script>

	<!-- Google reCAPTCHA v3 script -->
	<script src="https://www.google.com/recaptcha/api.js?render=6LejA3QqAAAAAFzmg21QmyiIrdTk4fbaaeeefyou"></script>
	<script>
		document.getElementById("preRegForm1").addEventListener("submit", function(event) {
			event.preventDefault(); // Prevent default form submission
			let submitBtn = this.querySelector(".btn-submit");
			submitBtn.disabled = true;

			grecaptcha.ready(function() {
				grecaptcha.execute('6LejA3QqAAAAAFzmg21QmyiIrdTk4fbaaeeefyou', {action: 'submit'}).then(function(token) {

					// Prepare the data to send
					var data = {
						email: document.getElementById("email").value,
						firstName: document.getElementById("firstName").value,
						lastName: document.getElementById("lastName").value,
						captcha: token
					};

					// Send the data via AJAX POST
					$.ajax({
						url: "https://iosco.sitefinityapps.com/apicustom/PreRegister/PreRegister",
						//url: "/reg-request.php",
						type: "POST",
						contentType: "application/json",
						data: JSON.stringify(data),
						success: function(response) {
							// alert("Form submitted successfully!");
							let resError = true;
							try {
								let res = JSON.parse(response);
								if (res && res.Status == "Y") {
									resError = false;
								}
							} catch (e) {
								console.log("Error Catch: ", e);
							}

							if (resError === false) {
								showConfirmationMsg("success");
							} else {
								showConfirmationMsg("error");
							}
						},
						error: function(xhr, status, error) {
							console.log("Error: ", error);
							showConfirmationMsg("error");
						},
						complete: function() {
							submitBtn.disabled = false;
						}
					});
				});
			});
		});

		function showConfirmationMsg(type = 'error') {
			let formWrapObj = document.querySelector(".formWrap");
			if (formWrapObj) {
				formWrapObj.classList.add(type);
			}
		}
	</script>
</body>
</html>